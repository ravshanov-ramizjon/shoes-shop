export const dynamic = "force-dynamic"
import { prisma } from "@/lib/prisma";
import { HomePage } from "@/components/castom/home";

// Интерфейсы
interface Category {
  id: string;
  name: string;
  // Добавь другие поля, если они есть в таблице Category
}

interface Product {
  id: string;
  name: string;
  price: number;
  createdAt: Date;
  category: Category;
  description: string;
  image: string;
}

export const metadata = {
  title: 'StepStyle — Интернет-магазин обуви',
  description: 'StepStyle — стильная и удобная обувь для женщин, мужчин и детей. Бесплатная доставка по Узбекистану. Новинки, скидки и большой выбор моделей.',
  keywords: [
    //  Основные слова
    'обувь', 'купить обувь', 'интернет-магазин обуви', 'магазин обуви онлайн', 'обувь Узбекистан', 'обувь Ташкент', 'обувной магазин',

    // 🔸 Женская обувь
    'женская обувь', 'ботильоны', 'туфли', 'лодочки', 'сабо', 'балетки', 'мюли', 'шлепанцы женские', 'женские кроссовки', 'женские ботинки',
    'женские сапоги', 'женские угги', 'женские сандалии', 'женская повседневная обувь', 'обувь на каблуке', 'обувь без каблука',
    'обувь на платформе', 'обувь для офиса', 'женская обувь на весну', 'летняя обувь женская', 'зимняя обувь женская',

    //  Мужская обувь
    'мужская обувь', 'мужские кроссовки', 'ботинки мужские', 'туфли мужские', 'мужские сандалии', 'мужские сланцы', 'мужские мокасины',
    'мужские лоферы', 'мужские кеды', 'зимняя обувь мужская', 'летняя обувь мужская', 'осенняя обувь мужская', 'мужская обувь на каждый день',
    'обувь для работы', 'обувь для мужчин Узбекистан', 'классическая мужская обувь', 'спорт обувь для мужчин',

    //  Детская обувь
    'детская обувь', 'обувь для мальчиков', 'обувь для девочек', 'кроссовки детские', 'туфли школьные', 'детские босоножки',
    'зимняя обувь для детей', 'обувь для школы', 'детская обувь на липучках', 'удобная детская обувь', 'обувь для малышей',
    'обувь для подростков', 'яркая детская обувь',

    //  Категории и типы
    'кроссовки', 'ботинки', 'туфли', 'сандалии', 'сланцы', 'угги', 'сапоги', 'мокасины', 'балетки', 'мюли', 'сабо', 'лоферы',
    'дерби', 'оксфорды', 'тапочки', 'кеды', 'гладиаторы', 'пинетки', 'эспадрильи', 'жилеты обувные',

    //  Материалы
    'обувь из кожи', 'обувь из замши', 'обувь из текстиля', 'обувь из экокожи', 'резиновая обувь', 'обувь из нубука',
    'натуральная кожа обувь', 'обувь из искусственной кожи', 'обувь из сетки',

    //  Сезоны
    'зимняя обувь', 'летняя обувь', 'осенняя обувь', 'весенняя обувь', 'демисезонная обувь',

    //  По цвету
    'черная обувь', 'белая обувь', 'бежевая обувь', 'коричневая обувь', 'синяя обувь', 'красная обувь', 'зеленая обувь',
    'серая обувь', 'фиолетовая обувь', 'желтая обувь', 'золотая обувь', 'серебряная обувь',

    //  Стиль
    'спортивная обувь', 'классическая обувь', 'повседневная обувь', 'дизайнерская обувь', 'уличная обувь', 'модная обувь',
    'обувь в стиле casual', 'ретро обувь', 'винтажная обувь', 'обувь для офиса', 'обувь для прогулок',

    //  Популярные фразы
    'дешевая обувь', 'обувь со скидкой', 'распродажа обуви', 'новинки обуви', 'удобная обувь', 'стильная обувь',
    'обувь с доставкой', 'бесплатная доставка обуви', 'обувь на заказ', 'лучшая обувь', 'топ обувь',
    'обувь премиум класса', 'брендовая обувь', 'модная обувь 2025', 'обувь в наличии', 'обувь онлайн оптом',

    //  По брендам (примерные или вымышленные)
    'Nike', 'Adidas', 'Puma', 'Reebok', 'Fila', 'StepStyle', 'Gucci', 'Zara', 'H&M', 'Bershka', 'Asics', 'Converse',
    'New Balance', 'Dr. Martens', 'Ecco', 'Clarks', 'Geox', 'Crocs', 'Timberland', 'Skechers',

    //  По назначению
    'обувь для работы', 'обувь для спорта', 'обувь для прогулок', 'обувь для вечеринок', 'обувь на свадьбу',
    'обувь для путешествий', 'обувь для водителей', 'обувь для беременных', 'ортопедическая обувь', 'массажная обувь',

    //  Гео-запросы
    'обувь Ташкент', 'обувь Самарканд', 'обувь Андижан', 'обувь Наманган', 'обувь Бухара', 'обувь Фергана',
    'обувь Узбекистан доставка', 'обувь онлайн Узбекистан', 'интернет-магазин обуви Ташкент',

    //  По целевой аудитории
    'обувь для подростков', 'обувь для мам', 'обувь для пап', 'обувь для бабушки', 'обувь для дедушки',
    'молодежная обувь', 'обувь для студентов', 'обувь для школьников', 'обувь для семьи',

  ],
  authors: [{ name: 'ShoesStore', url: 'https://www.web-site-dev.uz' }],
  creator: 'ShoesStore Team',
  themeColor: '#0ff', // неоновый акцент
  icons: {
    icon: '/favicon.ico',
    apple: '/apple-touch-icon.png',
  },
  openGraph: {
    title: 'ShoesStore — Модная обувь для всей семьи',
    description: 'Каталог новой коллекции: женская, мужская и детская обувь. Стиль, комфорт и доставка по всей стране!',
    url: 'https://www.web-site-dev.uz',
    siteName: 'StepStyle',
    images: [
      {
        url: 'https://www.web-site-dev.uz/og-image.jpg',
        width: 1200,
        height: 630,
        alt: 'ShoesStore — модная обувь',
      },
    ],
    type: 'website',
  },
  twitter: {
    card: 'summary_large_image',
    title: 'ShoesStore — Интернет-магазин обуви',
    description: 'Качественная и стильная обувь для всей семьи.',
    images: ['https://www.web-site-dev.uz/og-image.jpg'],
  },
  other: {
    'google-site-verification': 'bLdh4XA_Jmv9KBlGsbJwItsetpeKyRRnKQmNKOSAbic',
    "yandex-verification": "28b66dcc6a86e475"
  },
}

export default async function Page() {
  const categories: Category[] = (await prisma.category.findMany() as Category[]).map((category): Category => ({
    ...category,
    id: category.id.toString(),
  }));

  const products = (await prisma.product.findMany({
    include: { category: true },
    orderBy: { createdAt: "desc" },
  }) as (Product & { category: Category })[]).map((product): Product => ({
    ...product,
    id: product.id.toString(),
    category: {
      ...product.category,
      id: product.category.id.toString(),
    },
  }));

  return <HomePage categories={categories} products={products} />;
}
